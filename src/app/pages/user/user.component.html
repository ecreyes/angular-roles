<div class="container mt-4">
    <h3>Usuarios</h3>
    <button *ngxPermissionsOnly="['ADMIN']" type="button" class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#modalUser"
        (click)="createUser()">Crear</button>
    <hr>
    <br>
    <table class="table table-striped">
        <thead class="table-primary">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Nombre</th>
                <th scope="col">Correo</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let user of users$ | async">
                <th scope="row">{{user.id}}</th>
                <td>{{user.name}}</td>
                <td>{{user.email}}</td>
                <td>
                    <button *ngxPermissionsOnly="['ADMIN']" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#modalUser"
                        (click)="editUser(user.id)">Editar</button>
                    <button class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#userShow"
                        (click)="showUser(user)">Ver</button>
                    <button *ngxPermissionsOnly="['ADMIN']" class="btn btn-outline-danger" (click)="deleteUser(user.id)" [disabled]="isLoading">
                        <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status"
                            aria-hidden="true"></span>
                        Eliminar
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>


<app-user-modal [mode]="mode" [data]="data" (sendEvent)="actionModal($event)"></app-user-modal>

<app-user-show [user]="userSelected"></app-user-show>